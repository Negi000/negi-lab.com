<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <!-- Content Security Policy -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self'; 
    script-src 'self' 'unsafe-inline' 'unsafe-eval' 
      https://cdn.tailwindcss.com
      https://pagead2.googlesyndication.com
      https://www.googletagmanager.com; 
    style-src 'self' 'unsafe-inline' 
      https://fonts.googleapis.com 
      https://cdn.tailwindcss.com; 
    font-src 'self' 
      https://fonts.gstatic.com; 
    img-src 'self' data: blob:; 
    connect-src 'self' 
      https://www.google-analytics.com; 
    media-src 'self' blob: data:;
    object-src 'none'; 
    base-uri 'self';
  " />
  
  <!-- Security Headers -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
  
  <title data-translate-key="pageTitle">【無料】AI音楽生成ツール - BGM作成・ループ対応 プロ品質 | negi-lab.com</title>
  <meta name="description" data-translate-key="metaDescription" content="プロ品質のBGM・音楽を無料で生成。ループ対応、多楽器、感情表現豊かなAI作曲ツール。ゲーム開発、動画制作、プレゼンテーション用音楽を簡単作成。" />
  <meta property="og:title" data-translate-key="ogTitle" content="【無料】AI音楽生成ツール - BGM作成・ループ対応 | negi-lab.com" />
  <meta property="og:description" data-translate-key="ogDescription" content="プロ品質のBGM・音楽を無料で生成。ループ対応、多楽器、感情表現豊かなAI作曲ツール。" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://negi-lab.com/tools/music-generator.html" />
  <meta name="robots" content="index,follow" />
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" crossorigin="anonymous" />
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    window.tailwind = window.tailwind || {};
    window.tailwind.config = {
      theme: {
        extend: {
          colors: {
            negi: "#65c155",
            accent: "#4ADE80",
            primary: "#2563eb",
            secondary: "#64748b"
          },
          fontFamily: {
            sans: ['Inter', 'Noto Sans JP', 'sans-serif']
          }
        }
      }
    };
  </script>
  
  <style>
    .form-select, .form-input, .form-button, .form-range {
      padding: 0.5rem;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      transition: box-shadow 0.2s;
    }
    .form-select:focus, .form-input:focus, .form-button:focus, .form-range:focus {
      outline: none;
      box-shadow: 0 0 0 2px #4ADE80;
      border-color: #4ADE80;
    }
    .form-button {
      background: #4ADE80;
      color: #fff;
      transition: background 0.15s, color 0.15s;
      cursor: pointer;
    }
    .form-button:hover:not(:disabled) {
      background: #10b981;
    }
    .form-button:disabled {
      background: #d1d5db;
      color: #fff;
      cursor: not-allowed;
    }
    
    .preset-card {
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .preset-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .preset-card.selected {
      border-color: #4ADE80;
      background-color: rgba(74, 222, 128, 0.1);
    }
    
    .waveform-container {
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      border: 2px solid #e2e8f0;
      border-radius: 0.75rem;
      padding: 1rem;
    }
    
    #waveform-canvas {
      width: 100%;
      height: 120px;
      border-radius: 0.5rem;
      background: #1a202c;
    }
    
    .control-button {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    
    .control-button:hover:not(:disabled) {
      transform: scale(1.05);
    }
    
    .progress-container {
      animation: slideDown 0.3s ease-out;
    }
    
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(74, 222, 128, 0.3);
      border-radius: 50%;
      border-top-color: #4ADE80;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .message {
      padding: 1rem;
      border-radius: 0.5rem;
      margin: 1rem 0;
      font-weight: 500;
    }
    
    .message-success {
      background-color: rgba(34, 197, 94, 0.1);
      border: 1px solid #22c55e;
      color: #16a34a;
    }
    
    .message-error {
      background-color: rgba(239, 68, 68, 0.1);
      border: 1px solid #ef4444;
      color: #dc2626;
    }
    
    .message-info {
      background-color: rgba(59, 130, 246, 0.1);
      border: 1px solid #3b82f6;
      color: #2563eb;
    }
    
    .instrument-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 0.75rem;
    }
    
    .instrument-option {
      display: flex;
      align-items: center;
      padding: 0.75rem;
      border: 1px solid #e5e7eb;
      border-radius: 0.5rem;
      background: #f9fafb;
      transition: all 0.2s ease;
    }
    
    .instrument-option:hover {
      background: rgba(74, 222, 128, 0.05);
      border-color: #4ADE80;
    }
    
    .instrument-option input:checked + .instrument-label {
      color: #4ADE80;
      font-weight: 600;
    }
    
    .playback-controls {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: #f8fafc;
      border-radius: 0.75rem;
      margin-top: 1rem;
    }
    
    .progress-bar-container {
      flex: 1;
      height: 8px;
      background: #e2e8f0;
      border-radius: 4px;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #4ADE80 0%, #22c55e 100%);
      transition: width 0.1s ease;
      width: 0%;
    }
    
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    .modal-content {
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      margin: 1rem;
    }
    
    .quality-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 1rem;
      font-size: 0.75rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    
    .quality-professional {
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
    }
    
    .quality-standard {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
    }
    
    .quality-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 0.5rem;
      margin-top: 0.5rem;
    }
    
    .quality-stat {
      text-align: center;
      padding: 0.5rem;
      background: rgba(74, 222, 128, 0.1);
      border-radius: 0.5rem;
    }
    
    .quality-stat .label {
      display: block;
      font-size: 0.75rem;
      color: #6b7280;
      margin-bottom: 0.25rem;
    }
    
    .quality-stat .value {
      display: block;
      font-weight: 600;
      color: #374151;
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-800 font-inter min-h-screen flex flex-col">
  <!-- Header -->
  <header class="bg-white shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex justify-between items-center px-4 py-4">
      <a href="/" class="text-2xl font-extrabold text-accent tracking-tight hover:opacity-80 transition">negi-lab.com</a>
      <nav>
        <ul class="flex gap-6 font-medium text-base items-center">
          <li><a href="/#tools" class="hover:text-accent transition" data-translate-key="header.nav.tools">ツール</a></li>
          <li><a href="/#wikis" class="hover:text-accent transition" data-translate-key="header.nav.wikis">ゲームWiki</a></li>
          <li>
            <select id="lang-switch" class="rounded border border-gray-300 px-2 py-1 text-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-accent transition">
              <option value="ja" data-translate-key="lang.ja">日本語</option>
              <option value="en" data-translate-key="lang.en">English</option>
            </select>
          </li>
          <li>
            <button id="guide-btn" class="rounded border border-accent px-3 py-1 text-accent text-sm font-semibold bg-white hover:bg-accent/10 focus:outline-none focus:ring-2 focus:ring-accent transition" data-translate-key="ui.guideButton">ガイド</button>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="flex-grow">
    <!-- Hero Section -->
    <section class="bg-gradient-to-br from-accent/10 via-white to-blue-50 py-12">
      <div class="max-w-4xl mx-auto text-center px-4">
        <h1 class="text-4xl md:text-5xl font-extrabold mb-6 text-gray-900" data-translate-key="title">AI音楽生成ツール</h1>
        <p class="text-xl text-gray-700 mb-4" data-translate-key="subtitle">プロ品質のBGM・音楽を瞬時に生成</p>
        <p class="text-lg text-gray-600 mb-8" data-translate-key="description">高品質なAI技術で、ゲーム開発・動画制作・プレゼンテーション用のBGMを簡単に作成できます。ループ対応で用途に応じた音楽を生成します。</p>
      </div>
    </section>

    <!-- メッセージエリア -->
    <div id="message-area" class="message" style="display: none;"></div>

    <!-- メインコンテンツエリア -->
    <section class="max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
      
      <!-- 左カラム: 設定パネル -->
      <div class="lg:col-span-2 space-y-6">
        
        <!-- 用途別プリセット -->
        <div class="bg-white rounded-2xl p-6 shadow-sm">
          <h2 class="text-2xl font-bold mb-4 text-gray-900" data-translate-key="presets.title">用途別プリセット</h2>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            <div class="preset-card bg-gray-50 p-3 rounded-lg text-center" data-preset="youtube">
              <div class="text-2xl mb-2">🎬</div>
              <div class="text-sm font-medium" data-translate-key="presets.youtube">YouTube動画</div>
            </div>
            <div class="preset-card bg-gray-50 p-3 rounded-lg text-center" data-preset="game">
              <div class="text-2xl mb-2">🎮</div>
              <div class="text-sm font-medium" data-translate-key="presets.game">ゲーム背景</div>
            </div>
            <div class="preset-card bg-gray-50 p-3 rounded-lg text-center" data-preset="presentation">
              <div class="text-2xl mb-2">📊</div>
              <div class="text-sm font-medium" data-translate-key="presets.presentation">プレゼンテーション</div>
            </div>
            <div class="preset-card bg-gray-50 p-3 rounded-lg text-center" data-preset="podcast">
              <div class="text-2xl mb-2">🎙️</div>
              <div class="text-sm font-medium" data-translate-key="presets.podcast">ポッドキャスト</div>
            </div>
            <div class="preset-card bg-gray-50 p-3 rounded-lg text-center" data-preset="meditation">
              <div class="text-2xl mb-2">🧘</div>
              <div class="text-sm font-medium" data-translate-key="presets.meditation">瞑想・リラックス</div>
            </div>
            <div class="preset-card bg-gray-50 p-3 rounded-lg text-center" data-preset="workout">
              <div class="text-2xl mb-2">💪</div>
              <div class="text-sm font-medium" data-translate-key="presets.workout">ワークアウト</div>
            </div>
            <div class="preset-card bg-gray-50 p-3 rounded-lg text-center" data-preset="study">
              <div class="text-2xl mb-2">📚</div>
              <div class="text-sm font-medium" data-translate-key="presets.study">勉強・集中</div>
            </div>
            <div class="preset-card bg-gray-50 p-3 rounded-lg text-center" data-preset="sleep">
              <div class="text-2xl mb-2">😴</div>
              <div class="text-sm font-medium" data-translate-key="presets.sleep">睡眠導入</div>
            </div>
          </div>
        </div>

        <!-- 基本設定 -->
        <div class="bg-white rounded-2xl p-6 shadow-sm">
          <h2 class="text-2xl font-bold mb-6 text-gray-900" data-translate-key="generationSettings.title">音楽生成設定</h2>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- ジャンル -->
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-translate-key="generationSettings.genre.label">ジャンル</label>
              <select id="genre-select" class="form-select w-full">
                <option value="ambient" data-translate-key="generationSettings.genre.ambient">アンビエント</option>
                <option value="classical" data-translate-key="generationSettings.genre.classical">クラシック</option>
                <option value="electronic" data-translate-key="generationSettings.genre.electronic">エレクトロニック</option>
                <option value="jazz" data-translate-key="generationSettings.genre.jazz">ジャズ</option>
                <option value="rock" data-translate-key="generationSettings.genre.rock">ロック</option>
                <option value="pop" data-translate-key="generationSettings.genre.pop">ポップ</option>
                <option value="cinematic" data-translate-key="generationSettings.genre.cinematic">シネマティック</option>
                <option value="gameMusic" data-translate-key="generationSettings.genre.gameMusic">ゲーム音楽</option>
                <option value="lofi" data-translate-key="generationSettings.genre.lofi">Lo-Fi</option>
                <option value="chillout" data-translate-key="generationSettings.genre.chillout">チルアウト</option>
              </select>
            </div>

            <!-- ムード -->
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-translate-key="generationSettings.mood.label">ムード・感情</label>
              <select id="mood-select" class="form-select w-full">
                <option value="calm" data-translate-key="generationSettings.mood.calm">穏やか</option>
                <option value="happy" data-translate-key="generationSettings.mood.happy">ハッピー</option>
                <option value="sad" data-translate-key="generationSettings.mood.sad">悲しい</option>
                <option value="energetic" data-translate-key="generationSettings.mood.energetic">エネルギッシュ</option>
                <option value="mysterious" data-translate-key="generationSettings.mood.mysterious">神秘的</option>
                <option value="dramatic" data-translate-key="generationSettings.mood.dramatic">ドラマティック</option>
                <option value="romantic" data-translate-key="generationSettings.mood.romantic">ロマンティック</option>
                <option value="epic" data-translate-key="generationSettings.mood.epic">エピック</option>
                <option value="peaceful" data-translate-key="generationSettings.mood.peaceful">平和的</option>
                <option value="tense" data-translate-key="generationSettings.mood.tense">緊張感</option>
              </select>
            </div>

            <!-- テンポ -->
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-translate-key="generationSettings.tempo.label">テンポ (BPM)</label>
              <select id="tempo-select" class="form-select w-full">
                <option value="slow" data-translate-key="generationSettings.tempo.slow">ゆっくり (60-80)</option>
                <option value="medium" data-translate-key="generationSettings.tempo.medium">普通 (80-120)</option>
                <option value="fast" data-translate-key="generationSettings.tempo.fast">速い (120-160)</option>
                <option value="veryFast" data-translate-key="generationSettings.tempo.veryFast">とても速い (160+)</option>
              </select>
            </div>

            <!-- 長さ -->
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-translate-key="generationSettings.duration.label">長さ</label>
              <select id="duration-select" class="form-select w-full">
                <option value="short" data-translate-key="generationSettings.duration.short">短い (30秒)</option>
                <option value="medium" data-translate-key="generationSettings.duration.medium">普通 (1分)</option>
                <option value="long" data-translate-key="generationSettings.duration.long">長い (2分)</option>
                <option value="extended" data-translate-key="generationSettings.duration.extended">拡張 (3分)</option>
              </select>
            </div>
          </div>

          <!-- 楽器編成 -->
          <div class="mt-6">
            <label class="block text-sm font-semibold text-gray-700 mb-3" data-translate-key="generationSettings.instruments.label">楽器編成</label>
            <div class="instrument-grid">
              <label class="instrument-option">
                <input type="checkbox" class="instrument-checkbox mr-3" value="piano" checked>
                <span class="instrument-label" data-translate-key="generationSettings.instruments.piano">ピアノ</span>
              </label>
              <label class="instrument-option">
                <input type="checkbox" class="instrument-checkbox mr-3" value="guitar">
                <span class="instrument-label" data-translate-key="generationSettings.instruments.guitar">ギター</span>
              </label>
              <label class="instrument-option">
                <input type="checkbox" class="instrument-checkbox mr-3" value="strings">
                <span class="instrument-label" data-translate-key="generationSettings.instruments.strings">ストリングス</span>
              </label>
              <label class="instrument-option">
                <input type="checkbox" class="instrument-checkbox mr-3" value="synthesizer">
                <span class="instrument-label" data-translate-key="generationSettings.instruments.synthesizer">シンセサイザー</span>
              </label>
              <label class="instrument-option">
                <input type="checkbox" class="instrument-checkbox mr-3" value="drums">
                <span class="instrument-label" data-translate-key="generationSettings.instruments.drums">ドラム</span>
              </label>
              <label class="instrument-option">
                <input type="checkbox" class="instrument-checkbox mr-3" value="bass">
                <span class="instrument-label" data-translate-key="generationSettings.instruments.bass">ベース</span>
              </label>
              <label class="instrument-option">
                <input type="checkbox" class="instrument-checkbox mr-3" value="orchestral">
                <span class="instrument-label" data-translate-key="generationSettings.instruments.orchestral">オーケストラ</span>
              </label>
              <label class="instrument-option">
                <input type="checkbox" class="instrument-checkbox mr-3" value="electronic">
                <span class="instrument-label" data-translate-key="generationSettings.instruments.electronic">エレクトロニック</span>
              </label>
            </div>
          </div>

          <!-- ループ設定 -->
          <div class="mt-6">
            <label class="flex items-center">
              <input type="checkbox" id="loop-checkbox" class="mr-3" checked>
              <span class="text-sm font-semibold text-gray-700" data-translate-key="generationSettings.loop.enabled">ループBGMとして生成</span>
            </label>
          </div>
        </div>

        <!-- 高度な設定 -->
        <div class="bg-white rounded-2xl p-6 shadow-sm">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-bold text-gray-900" data-translate-key="advancedSettings.title">高度な設定</h3>
            <button id="advanced-toggle" class="text-accent hover:text-emerald-600 text-sm font-medium">
              詳細を表示
            </button>
          </div>
          
          <div id="advanced-settings" style="display: none;">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- 音量 -->
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2" data-translate-key="advancedSettings.volume.label">音量</label>
                <input type="range" id="volume-range" class="form-range w-full" min="0" max="1" step="0.1" value="0.7">
                <div class="text-xs text-gray-500 mt-1" data-translate-key="advancedSettings.volume.description">生成される音楽の音量レベル</div>
              </div>

              <!-- 複雑さ -->
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2" data-translate-key="advancedSettings.complexity.label">複雑さ</label>
                <select id="complexity-select" class="form-select w-full">
                  <option value="simple" data-translate-key="advancedSettings.complexity.simple">シンプル</option>
                  <option value="moderate" data-translate-key="advancedSettings.complexity.moderate">適度</option>
                  <option value="complex" data-translate-key="advancedSettings.complexity.complex">複雑</option>
                </select>
                <div class="text-xs text-gray-500 mt-1" data-translate-key="advancedSettings.complexity.description">音楽の複雑さとレイヤー数</div>
              </div>

              <!-- ハーモニー -->
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2" data-translate-key="advancedSettings.harmony.label">ハーモニー</label>
                <select id="harmony-select" class="form-select w-full">
                  <option value="consonant" data-translate-key="advancedSettings.harmony.consonant">協和音</option>
                  <option value="mixed" data-translate-key="advancedSettings.harmony.mixed">混合</option>
                  <option value="dissonant" data-translate-key="advancedSettings.harmony.dissonant">不協和音</option>
                </select>
                <div class="text-xs text-gray-500 mt-1" data-translate-key="advancedSettings.harmony.description">和声の種類</div>
              </div>

              <!-- ダイナミクス -->
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2" data-translate-key="advancedSettings.dynamics.label">ダイナミクス</label>
                <select id="dynamics-select" class="form-select w-full">
                  <option value="soft" data-translate-key="advancedSettings.dynamics.soft">ソフト</option>
                  <option value="balanced" data-translate-key="advancedSettings.dynamics.balanced">バランス</option>
                  <option value="dramatic" data-translate-key="advancedSettings.dynamics.dramatic">ドラマティック</option>
                </select>
                <div class="text-xs text-gray-500 mt-1" data-translate-key="advancedSettings.dynamics.description">音楽の強弱変化</div>
              </div>
            </div>
          </div>
        </div>

        <!-- 生成ボタン -->
        <div class="text-center">
          <button id="generate-btn" class="form-button px-8 py-3 text-lg font-bold rounded-xl shadow-lg transform transition hover:scale-105" data-translate-key="controls.generate">
            音楽を生成
          </button>
        </div>

        <!-- 進行状況 -->
        <div id="progress-area" class="progress-container bg-white rounded-2xl p-6 shadow-sm" style="display: none;">
          <div class="flex items-center justify-between mb-2">
            <span class="text-sm font-medium text-gray-700">生成中...</span>
            <span id="progress-text" class="text-sm text-gray-500">初期化中...</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div id="progress-bar" class="bg-accent h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
          </div>
        </div>
      </div>

      <!-- 右カラム: プレビュー・制御 -->
      <div class="space-y-6">
        
        <!-- 音楽プレビュー -->
        <div id="preview-area" class="bg-white rounded-2xl p-6 shadow-sm" style="display: none;">
          <h3 class="text-xl font-bold mb-4 text-gray-900" data-translate-key="preview.title">生成された音楽</h3>
          
          <!-- 波形表示 -->
          <div class="waveform-container mb-4">
            <canvas id="waveform-canvas"></canvas>
          </div>

          <!-- 再生制御 -->
          <div class="playback-controls">
            <button id="play-btn" class="control-button bg-accent text-white" title="再生" aria-label="音楽を再生">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M8 5v10l7-5-7-5z"/>
              </svg>
            </button>
            <button id="pause-btn" class="control-button bg-accent text-white" style="display: none;" title="一時停止" aria-label="音楽を一時停止">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M5 4h3v12H5V4zm7 0h3v12h-3V4z"/>
              </svg>
            </button>
            <button id="stop-btn" class="control-button bg-gray-500 text-white" title="停止" aria-label="音楽を停止">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M4 4h12v12H4V4z"/>
              </svg>
            </button>
            
            <div class="flex-1 mx-4">
              <div class="progress-bar-container">
                <div id="playback-progress" class="progress-bar"></div>
              </div>
              <div class="flex justify-between text-xs text-gray-500 mt-1">
                <span id="current-time">0:00</span>
                <span id="duration">0:00</span>
              </div>
            </div>
          </div>

          <!-- メタデータ -->
          <div class="mt-4 p-4 bg-gray-50 rounded-lg">
            <div class="grid grid-cols-2 gap-2 text-sm">
              <div><strong>長さ:</strong> <span id="metadata-duration">-</span></div>
              <div><strong>テンポ:</strong> <span id="metadata-tempo">-</span></div>
              <div><strong>調:</strong> <span id="metadata-key">-</span></div>
              <div><strong>生成日時:</strong> <span id="metadata-generated">-</span></div>
            </div>
          </div>

          <!-- 品質インジケーター -->
          <div id="quality-indicator" class="mt-4"></div>
        </div>

        <!-- ダウンロード -->
        <div id="download-area" class="bg-white rounded-2xl p-6 shadow-sm" style="display: none;">
          <h3 class="text-xl font-bold mb-4 text-gray-900" data-translate-key="downloadFormats.title">ダウンロード形式</h3>
          
          <div class="mb-4">
            <select id="download-format" class="form-select w-full">
              <option value="wav" data-translate-key="downloadFormats.wav">WAV (高音質)</option>
              <option value="mp3" data-translate-key="downloadFormats.mp3">MP3 (推奨)</option>
              <option value="ogg" data-translate-key="downloadFormats.ogg">OGG</option>
              <option value="m4a" data-translate-key="downloadFormats.m4a">M4A</option>
            </select>
          </div>
          
          <button id="download-btn" class="form-button w-full py-3 font-bold" data-translate-key="controls.download">
            ダウンロード
          </button>
        </div>

        <!-- 機能・特徴 -->
        <div class="bg-white rounded-2xl p-6 shadow-sm">
          <h3 class="text-xl font-bold mb-4 text-gray-900" data-translate-key="features.title">主な機能</h3>
          <ul class="space-y-2 text-sm text-gray-600">
            <li class="flex items-center">
              <svg class="w-4 h-4 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
              </svg>
              <span data-translate-key="features.list.realtime">リアルタイム生成</span>
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
              </svg>
              <span data-translate-key="features.list.highQuality">プロ品質の音質</span>
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
              </svg>
              <span data-translate-key="features.list.multiInstrument">多楽器対応</span>
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
              </svg>
              <span data-translate-key="features.list.loopSupport">ループBGM対応</span>
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
              </svg>
              <span data-translate-key="features.list.commercialUse">商用利用可能</span>
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-accent mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
              </svg>
              <span data-translate-key="features.list.noRegistration">登録不要</span>
            </li>
          </ul>
        </div>
      </div>
    </section>

    <!-- 教育セクション -->
    <section class="bg-white py-12">
      <div class="max-w-4xl mx-auto px-4">
        <div class="text-center mb-8">
          <h2 class="text-3xl font-bold text-gray-900 mb-4" data-translate-key="education.title">音楽生成について学ぶ</h2>
          <p class="text-lg text-gray-600" data-translate-key="education.subtitle">AI音楽生成の基礎知識</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div class="space-y-6">
            <div>
              <h3 class="text-xl font-semibold text-gray-900 mb-3" data-translate-key="education.sections.basics.title">AI音楽生成の基本</h3>
              <p class="text-gray-600 leading-relaxed" data-translate-key="education.sections.basics.content">AI音楽生成は、機械学習アルゴリズムを使用して、指定されたパラメータに基づいて音楽を自動生成する技術です。深層学習により、楽器の組み合わせ、メロディ、ハーモニー、リズムを分析し、自然で魅力的な音楽を作成します。</p>
            </div>

            <div>
              <h3 class="text-xl font-semibold text-gray-900 mb-3" data-translate-key="education.sections.quality.title">高音質生成のコツ</h3>
              <p class="text-gray-600 leading-relaxed" data-translate-key="education.sections.quality.content">高品質な音楽を生成するためには、明確なジャンルとムードの選択、適切なテンポ設定、楽器編成の調整が重要です。また、用途に応じてループ設定を適切に選択することで、より実用的な音楽が生成されます。</p>
            </div>
          </div>

          <div class="space-y-6">
            <div>
              <h3 class="text-xl font-semibold text-gray-900 mb-3" data-translate-key="education.sections.usage.title">商用利用について</h3>
              <p class="text-gray-600 leading-relaxed" data-translate-key="education.sections.usage.content">生成された音楽は、個人利用・商用利用ともに可能です。ただし、著作権に関する詳細は利用規約をご確認ください。YouTubeやゲーム開発、プレゼンテーションなど、様々な用途でご活用いただけます。</p>
            </div>

            <div>
              <h3 class="text-xl font-semibold text-gray-900 mb-3" data-translate-key="education.sections.technical.title">技術的な特徴</h3>
              <p class="text-gray-600 leading-relaxed" data-translate-key="education.sections.technical.content">本ツールは最新のニューラルネットワーク技術を使用し、リアルタイムで高品質な音楽を生成します。複数の楽器レイヤー、動的な音響効果、適応的なハーモニー生成により、プロフェッショナルレベルの音楽制作を実現しています。</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- ガイドモーダル -->
  <div id="guide-modal" class="modal">
    <div class="modal-content">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-gray-900" data-translate-key="guide.title">音楽生成ツール使い方ガイド</h2>
        <button id="close-guide" class="text-gray-500 hover:text-gray-700">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <div class="space-y-6">
        <div class="flex items-start space-x-4">
          <div class="flex-shrink-0 w-8 h-8 bg-accent text-white rounded-full flex items-center justify-center font-bold">1</div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-2" data-translate-key="guide.steps.step1.title">1. ジャンルとムードを選択</h3>
            <p class="text-gray-600" data-translate-key="guide.steps.step1.description">作りたい音楽のジャンルと感情を選択します。これが音楽の基本的な方向性を決定します。</p>
          </div>
        </div>

        <div class="flex items-start space-x-4">
          <div class="flex-shrink-0 w-8 h-8 bg-accent text-white rounded-full flex items-center justify-center font-bold">2</div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-2" data-translate-key="guide.steps.step2.title">2. テンポと長さを設定</h3>
            <p class="text-gray-600" data-translate-key="guide.steps.step2.description">用途に応じてテンポ（BPM）と音楽の長さを設定します。BGMの場合はループ設定も有効にしてください。</p>
          </div>
        </div>

        <div class="flex items-start space-x-4">
          <div class="flex-shrink-0 w-8 h-8 bg-accent text-white rounded-full flex items-center justify-center font-bold">3</div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-2" data-translate-key="guide.steps.step3.title">3. 楽器編成を選択</h3>
            <p class="text-gray-600" data-translate-key="guide.steps.step3.description">使用したい楽器を選択します。複数選択可能で、選択した楽器の組み合わせで音楽が生成されます。</p>
          </div>
        </div>

        <div class="flex items-start space-x-4">
          <div class="flex-shrink-0 w-8 h-8 bg-accent text-white rounded-full flex items-center justify-center font-bold">4</div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-2" data-translate-key="guide.steps.step4.title">4. 音楽を生成</h3>
            <p class="text-gray-600" data-translate-key="guide.steps.step4.description">「音楽を生成」ボタンをクリックして、AI が音楽を作成します。生成には数秒かかります。</p>
          </div>
        </div>

        <div class="flex items-start space-x-4">
          <div class="flex-shrink-0 w-8 h-8 bg-accent text-white rounded-full flex items-center justify-center font-bold">5</div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-2" data-translate-key="guide.steps.step5.title">5. 再生・ダウンロード</h3>
            <p class="text-gray-600" data-translate-key="guide.steps.step5.description">生成された音楽を再生して確認し、気に入ったら希望の形式でダウンロードできます。</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-8">
    <div class="max-w-4xl mx-auto px-4 text-center">
      <div class="mb-4">
        <a href="/" class="text-2xl font-bold text-accent">negi-lab.com</a>
      </div>
      <div class="flex justify-center space-x-6 text-sm text-gray-400">
        <a href="/" class="hover:text-white transition" data-translate-key="footer.usage">使い方</a>
        <a href="/privacy-policy.html" class="hover:text-white transition" data-translate-key="footer.privacy">プライバシーポリシー</a>
        <a href="/about.html" class="hover:text-white transition" data-translate-key="footer.about">このツールについて</a>
      </div>
      <div class="mt-4 text-xs text-gray-500">
        © 2024 negi-lab.com. All rights reserved.
      </div>
    </div>
  </footer>

  <!-- スクリプト読み込み -->
  <script src="../js/music-generator-translations.js"></script>
  <script src="../js/music-generator-core-clean.js"></script>
  <script src="../js/music-generator-ui.js"></script>
  <script src="../js/music-generator-test.js"></script>
  
  <script>
    // 音楽生成完了後の処理
    document.addEventListener('DOMContentLoaded', function() {
      // プレビューエリア・ダウンロードエリアの表示制御
      console.log('DOM loaded, checking components...');
      
      // 簡易テスト機能
      window.quickTest = function() {
        console.log('Quick test started');
        
        // 設定確認
        console.log('Genre:', document.getElementById('genre-select')?.value);
        console.log('Mood:', document.getElementById('mood-select')?.value);
        console.log('Tempo:', document.getElementById('tempo-select')?.value);
        console.log('Duration:', document.getElementById('duration-select')?.value);
        
        // 音楽ジェネレーター確認
        console.log('Music Generator:', !!window.musicGenerator);
        console.log('Music Generator UI:', !!window.musicGeneratorUI);
        
        // 生成ボタンクリック
        const generateBtn = document.getElementById('generate-btn');
        if (generateBtn) {
          console.log('Clicking generate button...');
          generateBtn.click();
        } else {
          console.error('Generate button not found');
        }
      };
      
      // 5秒後に自動テスト
      setTimeout(() => {
        console.log('Auto-test in 5 seconds...');
        window.quickTest();
      }, 5000);
    });
  </script>
</body>
</html>
