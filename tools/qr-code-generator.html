<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-translate-key="qrGenerator.pageTitle">QRコード作成ツール - negi-lab.com</title>
  <meta name="description" data-translate-key="qrGenerator.metaDescription" content="テキストやURLから簡単にカスタムQRコードを生成できるツール。エラー訂正レベルも調整可能。" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            negi: "#65c155",
            accent: "#4ADE80"
          },
          fontFamily: { inter: ["Inter", "sans-serif"] }
        }
      }
    }
    window.pageTitleTranslationKey = "qrGenerator.pageTitle";
    window.metaDescriptionTranslationKey = "qrGenerator.metaDescription";
  </script>
  <style>
    /* .form-input, .form-select, .form-button {
      @apply p-2 border border-gray-300 rounded-md shadow-sm focus:ring-accent focus:border-accent;
    }
    .form-button {
      @apply bg-accent text-white hover:bg-emerald-500 transition duration-150 ease-in-out;
    }
    .form-button:disabled {
      @apply bg-gray-300 cursor-not-allowed hover:bg-gray-300;
    } */
    /* 上記@applyはTailwind JIT専用。通常のCSSに書き換え */
    .form-input, .form-select, .form-button {
      padding: 0.5rem;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      transition: box-shadow 0.2s;
    }
    .form-input:focus, .form-select:focus, .form-button:focus {
      outline: none;
      box-shadow: 0 0 0 2px #4ADE80;
      border-color: #4ADE80;
    }
    .form-button {
      background: #4ADE80;
      color: #fff;
      transition: background 0.15s, color 0.15s;
    }
    .form-button:hover:not(:disabled) {
      background: #10b981;
    }
    .form-button:disabled {
      background: #d1d5db;
      color: #fff;
      cursor: not-allowed;
    }
    #qrcodeOutput {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px;
        border: 1px solid #e2e8f0; /* gray-200 */
        border-radius: 0.375rem; /* rounded-md */
        min-height: 200px; 
        background-color: white;
    }
    #qrcodeOutput img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: auto;
    }
  </style>
  <!-- Google Analytics（gtag.js）全ページ用 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N9X3N0RY0H"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N9X3N0RY0H');
  </script>
  <!-- Google AdSense審査用コード -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1835873052239386" crossorigin="anonymous"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-inter min-h-screen flex flex-col">

  <!-- Amazonアソシエイト/楽天アフィリエイト Cookie埋め込み・imgタグ削除（ASP規約対策） -->

  <!-- Header -->
  <header class="bg-white shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex justify-between items-center px-4 py-4">
      <a href="/" class="text-2xl font-extrabold text-accent tracking-tight hover:opacity-80 transition">negi-lab.com</a>
      <nav>
        <ul class="flex gap-6 font-medium text-base items-center">
          <li><a href="/#tools" class="hover:text-accent transition" data-translate-key="header.nav.tools">ツール</a></li>
          <li><a href="/#wikis" class="hover:text-accent transition" data-translate-key="header.nav.wikis">ゲームWiki</a></li>
          <li>
            <select id="lang-switch" class="rounded border border-gray-300 px-2 py-1 text-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-accent transition">
              <option value="ja" data-translate-key="option.ja">日本語</option>
              <option value="en" data-translate-key="option.en">English</option>
            </select>
          </li>
          <li>
            <button id="guide-btn" class="rounded border border-accent px-3 py-1 text-accent text-sm font-semibold bg-white hover:bg-accent/10 focus:outline-none focus:ring-2 focus:ring-accent transition" aria-haspopup="dialog" aria-controls="guide-modal" data-translate-key="header.guide">ガイド</button>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="flex-grow py-12">
    <div class="max-w-2xl mx-auto px-4">
      <h1 class="text-3xl md:text-4xl font-bold text-center text-gray-900 mb-10" data-translate-key="qrGenerator.mainTitle">QRコード作成ツール</h1>
      
      <!-- ツール上部：アドセンス（レスポンシブ） -->
      <div class="max-w-2xl mx-auto my-6">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-xxxxxxxxxxxxxxxx"
             data-ad-slot="1234567890"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      </div>

      <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg space-y-6">
        <div>
          <label for="qrData" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="qrGenerator.dataLabel">データ (テキストまたはURL):</label>
          <textarea id="qrData" rows="3" class="form-input w-full" placeholder="https://negi-lab.com" aria-label="QRコードに埋め込むデータ（テキストまたはURL）"></textarea>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
                <label for="qrSize" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="qrGenerator.sizeLabel">サイズ (px):</label>
                <input type="number" id="qrSize" value="256" min="50" max="1000" class="form-input w-full" aria-label="QRコードのサイズ（ピクセル）">
            </div>
            <div>
                <label for="qrErrorCorrection" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="qrGenerator.errorCorrectionLabel">エラー訂正レベル:</label>
                <select id="qrErrorCorrection" class="form-select w-full" aria-label="QRコードのエラー訂正レベル">
                    <option value="L" data-translate-key="qrGenerator.errorCorrection.L">Low (L ~7%)</option>
                    <option value="M" data-translate-key="qrGenerator.errorCorrection.M">Medium (M ~15%)</option>
                    <option value="Q" data-translate-key="qrGenerator.errorCorrection.Q">Quartile (Q ~25%)</option>
                    <option value="H" data-translate-key="qrGenerator.errorCorrection.H">High (H ~30%)</option>
                </select>
            </div>
        </div>
         <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
                <label for="qrFgColor" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="qrGenerator.fgColorLabel">前景色:</label>
                <input type="color" id="qrFgColor" value="#000000" class="form-input w-full h-10 p-1" aria-label="QRコードの前景色">
            </div>
            <div>
                <label for="qrBgColor" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="qrGenerator.bgColorLabel">背景色:</label>
                <input type="color" id="qrBgColor" value="#ffffff" class="form-input w-full h-10 p-1" aria-label="QRコードの背景色">
            </div>
        </div>
        
        <button id="generateQrButton" class="form-button w-full py-2.5" data-translate-key="qrGenerator.generateButton">QRコードを生成</button>
        
        <div id="qrResultContainer" class="mt-4 space-y-3 hidden">
            <div id="qrcodeOutput" role="img" aria-label="Generated QR Code">
                <!-- QR Code will be rendered here by JavaScript -->
            </div>
            <button id="downloadQrButton" class="form-button w-full py-2.5" data-translate-key="qrGenerator.downloadButton">PNGでダウンロード</button>
        </div>
        
        <div id="messageArea" class="text-sm mt-2">
            <p id="statusMessage" class="text-gray-600"></p>
            <p id="errorMessage" class="text-red-600"></p>
        </div>

      </div>

      <!-- スポンサーリンクラベル（広告直前） -->
      <div class="text-xs text-gray-500 mb-1" aria-label="スポンサーリンク">スポンサーリンク</div>
      <!-- ここに広告コード（例: AdSense）を挿入 -->

      <!-- ツール下部：Amazon・楽天バナー横並び → 動的広告バナーに置換 -->
      <div id="dynamic-ad" class="flex justify-center my-8"></div>
<script>renderDynamicAd('dynamic-ad');</script>

      <!-- フッター直前：アドセンス（インフィード/ディスプレイ） -->
      <div class="max-w-2xl mx-auto my-8">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-xxxxxxxxxxxxxxxx"
             data-ad-slot="0987654321"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      </div>

      <!-- 独自性説明・免責事項セクション -->
      <section class="mt-12 mb-8 text-sm text-gray-700 bg-white rounded-lg p-4 border border-gray-200" aria-label="このツールについて">
        <h2 class="font-bold text-base mb-2">negi-lab.comの独自性・運営方針・免責事項</h2>
        <ul class="list-disc ml-5 mb-2">
          <li>本ツールはnegi-lab.comが独自開発・運営しています。</li>
          <li>広告・アフィリエイトを含みますが、ユーザー体験を最優先しています。</li>
          <li>正確性・安全性には万全を期していますが、利用は自己責任でお願いします。</li>
        </ul>
        <p class="text-xs text-gray-500">&copy; 2025 negi-lab.com</p>
      </section>
    </div>
  </main>

  <footer class="bg-gray-800 text-gray-300 py-8 text-center text-sm">
    <nav class="mb-2">
      <a href="/privacy-policy.html" class="underline hover:text-accent mx-2">プライバシーポリシー</a>
      <a href="/terms.html" class="underline hover:text-accent mx-2">利用規約</a>
      <a href="/about.html" class="underline hover:text-accent mx-2">運営者情報</a>
      <a href="mailto:negilab.com@gmail.com" class="underline hover:text-accent mx-2">お問い合わせ</a>
      <a href="/sitemap.xml" class="underline hover:text-accent mx-2">サイトマップ</a>
    </nav>
    <div>&copy; 2025 negi-lab.com</div>
  </footer>

  <!-- Guide Modal Popup -->
  <div id="guide-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/40 hidden" role="dialog" aria-modal="true" aria-labelledby="guide-modal-title">
    <div class="bg-white rounded-xl shadow-xl max-w-lg w-full p-6 relative">
      <button id="guide-close" class="absolute top-2 right-2 text-gray-400 hover:text-accent text-2xl font-bold" aria-label="閉じる">&times;</button>
      <div id="guide-modal-content"></div>
    </div>
  </div>

  <script type="module" src="../index.js" defer></script>
  <script defer>
function setupGuideModal() {
  const guideBtn = document.getElementById('guide-btn');
  const guideModal = document.getElementById('guide-modal');
  const guideClose = document.getElementById('guide-close');
  const guideContent = document.getElementById('guide-modal-content');
  const guides = {
    ja: {
      title: 'QRコード作成ツールの使い方',
      list: [
        'テキスト・URL・Wi-Fi情報などを入力',
        'エラー訂正や色・サイズを調整',
        '生成ボタンでQRコードを作成',
        '右上メニューで日本語・英語切替可能'
      ],
      tipsTitle: '活用例・ヒント',
      tips: [
        '名刺やWebサイト用のQRコード作成',
        'Wi-Fi接続用QRコードの生成'
      ]
    },
    en: {
      title: 'How to Use the QR Code Generator',
      list: [
        'Enter the text, URL, or Wi-Fi info you want to encode.',
        'Adjust error correction, color, and size as needed.',
        'Click the generate button to create your QR code.',
        'Switch language from the top menu. All features are available in English and Japanese.'
      ],
      tipsTitle: 'Tips & Examples',
      tips: [
        'Create a QR code for your website or business card.',
        'Generate Wi-Fi QR codes for easy sharing.'
      ]
    }
  };
  if(guideBtn && guideModal && guideClose && guideContent) {
    guideBtn.addEventListener('click', function() {
      const lang = document.documentElement.lang || localStorage.getItem('selectedLanguage') || 'ja';
      const g = guides[lang] || guides.ja;
      let html = `<h2 class='text-xl font-bold mb-3'>${g.title}</h2>`;
      html += '<ul class="list-disc ml-5 mb-4 text-gray-700">' + g.list.map(x=>`<li>${x}</li>`).join('') + '</ul>';
      html += `<h3 class='font-bold text-base mt-6 mb-2'>${g.tipsTitle}</h3><ul class='list-disc ml-5 text-gray-700'>` + g.tips.map(x=>`<li>${x}</li>`).join('') + '</ul>';
      guideContent.innerHTML = html;
      guideModal.classList.remove('hidden');
    });
    guideClose.addEventListener('click', function() {
      guideModal.classList.add('hidden');
    });
    guideModal.addEventListener('click', function(e) {
      if(e.target === guideModal) guideModal.classList.add('hidden');
    });
  }
}
if (document.readyState === "loading") {
  document.addEventListener("DOMContentLoaded", setupGuideModal);
} else {
  setupGuideModal();
}
</script>
</body>
</html>
