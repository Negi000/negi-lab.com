<!DOCTYPE html>
<html lang="ja" data-no-dynamic-ads>
<head>
  <meta charset="UTF-8" />
  <title>ロム図鑑 | 新月同行 Wiki</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0d1216" />
  <meta name="description" content="新月同行（Fellow Moon）のロム図鑑。セット効果と各ロムの最大ステータスを一覧・並び替えで確認できます。" />
  <link rel="canonical" href="https://negi-lab.com/gamewiki/FellowMoon/site/roms/" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ロム図鑑 | 新月同行 Wiki" />
  <meta property="og:description" content="新月同行（Fellow Moon）のロム図鑑。セット効果と各ロムの最大ステータスを一覧・並び替えで確認できます。" />
  <meta property="og:url" content="https://negi-lab.com/gamewiki/FellowMoon/site/roms/" />
  <meta property="og:site_name" content="新月同行 Wiki" />
  <meta property="og:image" content="https://negi-lab.com/favicon.ico" />
  <meta name="twitter:card" content="summary_large_image" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" crossorigin="anonymous" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>window.tailwind=window.tailwind||{};window.tailwind.config={theme:{extend:{colors:{accent:'#4ADE80'},fontFamily:{inter:['Inter','sans-serif']}}}};</script>
  <link rel="preconnect" href="https://pagead2.googlesyndication.com">
  <link rel="preconnect" href="https://googleads.g.doubleclick.net">
  <link rel="preconnect" href="https://www.googletagservices.com">
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP",sans-serif;margin:0;background:#0d1216;color:#e6edf3;line-height:1.5;-webkit-font-smoothing:antialiased}
    :root{--c-accent:#3a8bff;--c-bgcard:#161e26;--c-border:#24303b;--c-soft:#1c2731;--w-wrap:1280px}
    main{max-width:var(--w-wrap);margin:auto;padding:1.2rem .9rem 3rem}
    .wiki-hero{margin:0 0 1.4rem;position:relative}
    .wiki-hero-bar{display:flex;align-items:center;gap:.75rem;background:linear-gradient(135deg,#14212b,#1b2d38 55%,#14212b);border:1px solid #253542;padding:.85rem .95rem;border-radius:16px;position:relative;overflow:hidden}
    .wiki-hero-bar:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 75% 20%,rgba(99,183,255,.25),transparent 60%);pointer-events:none}
    .wiki-hero-title{font-size:clamp(1.35rem,5.3vw,2.1rem);line-height:1.05;font-weight:800;letter-spacing:.5px;background:linear-gradient(92deg,#63b7ff,#9ad8ff 45%,#63b7ff);-webkit-background-clip:text;background-clip:text;color:transparent;filter:drop-shadow(0 2px 6px rgba(60,130,190,.25))}
    .wiki-search{margin-left:auto;display:flex;align-items:center;min-width:0;position:relative}
    .wiki-search input{background:#0f161c;border:1px solid #29404e;color:#d9edff;font-size:.75rem;padding:.55rem .75rem;border-radius:10px;width:170px;transition:.25s}
    .wiki-search input:focus{outline:none;border-color:#3a8bff;box-shadow:0 0 0 3px rgba(58,139,255,.25)}
    @media(min-width:520px){.wiki-search input{width:220px}}
    @media(min-width:900px){.wiki-search input{width:260px}}
    .wiki-cat-bar-wrapper{margin-top:.65rem}
    .wiki-cat-bar{display:flex;gap:.55rem;overflow-x:auto;padding:.4rem .15rem .15rem;scrollbar-width:none;-ms-overflow-style:none}
    .wiki-cat-bar::-webkit-scrollbar{display:none}
    .wiki-cat-btn{flex:0 0 auto;position:relative;background:#18232d;border:1px solid #243744;color:#cfe2ff;font-weight:600;font-size:.68rem;letter-spacing:.5px;padding:.55rem .85rem;border-radius:11px;cursor:pointer;display:inline-flex;align-items:center;gap:.45rem;transition:.25s}
    .wiki-cat-btn:hover{background:#20303a;border-color:#335063}
    .wiki-cat-btn[aria-expanded="true"]{background:#254052;border-color:#3a627b;box-shadow:0 0 0 2px rgba(58,139,255,.25)}
    .wiki-cat-btn:after{content:"";width:8px;height:8px;border-right:2px solid #7fbef5;border-bottom:2px solid #7fbef5;transform:rotate(45deg);margin-left:2px;transition:.3s}
    .wiki-cat-btn[aria-expanded="true"]:after{transform:rotate(-135deg) translateY(2px)}
    .wiki-acc-panels{position:relative;margin-top:.4rem}
    .wiki-acc-panel{border:1px solid #2e4250;background:#101a22;border-radius:14px;padding:.9rem .95rem;display:none;animation:accFade .35s ease;box-shadow:0 6px 22px -8px #000a}
    .wiki-acc-panel.open{display:block}
    @keyframes accFade{from{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}
    .wiki-acc-grid{display:grid;gap:.65rem;grid-template-columns:repeat(auto-fit,minmax(130px,1fr))}
  .wiki-acc-grid a{display:flex;flex-direction:column;gap:.3rem;text-decoration:none;background:#16222b;border:1px solid #243744;padding:.65rem .7rem;border-radius:10px;font-size:.64rem;font-weight:600;color:#c3e6ff;letter-spacing:.4px;position:relative;overflow:hidden}
  .wiki-acc-grid a:before{content:"";position:absolute;inset:0;background:linear-gradient(140deg,rgba(99,183,255,.12),transparent 55%);opacity:0;transition:.35s}
  .wiki-acc-grid a:hover{background:#1d2d37;border-color:#335063}
  .wiki-acc-grid a:hover:before{opacity:1}
  .wiki-acc-badge{display:inline-block;background:#254052;color:#9ed8ff;font-size:.55rem;padding:2px 6px;border-radius:8px;margin-left:auto;font-weight:600}
    .section{margin:0 0 1.9rem}
    .section h2{font-size:clamp(.9rem,3.5vw,1rem);margin:0 0 .9rem;border-left:4px solid var(--c-accent);padding-left:.55rem;line-height:1.1}
    .card{background:var(--c-bgcard);border:1px solid var(--c-border);border-radius:12px;padding:.85rem .85rem;position:relative}
    .grid-roms{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px}
  .rom-card{display:block;background:#141c24;border:1px solid #23313c;border-radius:12px;padding:.6rem;text-align:center;color:inherit;text-decoration:none}
    .rom-card img{width:100%;height:auto;border-radius:8px;background:#0c1217;border:1px solid #1c2a34}
    .rom-card .name{font-size:.8rem;margin-top:.45rem}
    table{width:100%;border-collapse:collapse;background:var(--c-bgcard);border:1px solid var(--c-border);border-radius:12px;overflow:hidden}
    thead th{position:sticky;top:0;background:#16222b;border-bottom:1px solid #243744;padding:.5rem;font-size:.7rem;text-align:left}
    tbody td{border-top:1px solid #1f2a33;padding:.5rem;font-size:.7rem}
    .sort-btns{display:inline-flex;gap:4px;margin-left:.3rem}
    .sort-btns button{background:#20303a;border:1px solid #324754;color:#cfe2ff;border-radius:6px;padding:2px 6px;font-size:.65rem}
    .table-wrap{overflow-x:auto;-webkit-overflow-scrolling:touch}
    thead th, tbody td{word-break:break-word}

    /* スマホファースト最適化 */
    @media(max-width:640px){
      .grid-roms{grid-template-columns:repeat(3,1fr);gap:8px}
      .rom-card{padding:.5rem}
      .rom-card .name{font-size:.72rem}
      table{table-layout:fixed}
      thead th, tbody td{padding:.4rem;font-size:.66rem}
    }
  @media(min-width:760px){.wiki-acc-grid a{font-size:.62rem}}

  /* Ad blocks (dark theme, shared styleに準拠) */
  .ad-block{margin:1.2rem 0;padding:.6rem .8rem;border:1px solid #23313c;background:#182028;border-radius:12px}
  .ad-block .ad-label{font-size:.55rem;letter-spacing:.5px;color:#8aa;margin:0 0 .35rem}
  /* 初期高さを極小化（広告未表示時に目立たないように） */
  .ad-block ins.adsbygoogle{display:block;min-height:0;height:auto;width:100%}
  /* 広告未表示判定時（JSでdata-ad-empty付与）: さらに圧縮 */
  .ad-block[data-ad-empty="true"]{padding:.2rem .4rem;margin:.5rem 0;border-style:dashed;opacity:.75}
  .ad-block[data-ad-empty="true"] .ad-label{margin:0}
  .ad-block[data-ad-empty="true"] ins.adsbygoogle{min-height:0;height:0}
  /* セクションの縦スペースも圧縮 */
  .section[data-ad-empty="true"]{margin:.3rem 0 .5rem}
  
  /* 特性能力値セクション */
  #roms-traits{position:relative;border:1px solid #23313c;border-radius:14px;overflow:hidden;background:#0f161c}
  #roms-traits .bg{position:absolute;inset:0;background:url('../assets/roms/rom_bg3.png') center/cover no-repeat;opacity:.28;filter:grayscale(20%)}
  #roms-traits .inner{position:relative;padding:1rem;background:linear-gradient(180deg,rgba(12,18,24,.65),rgba(12,18,24,.45));border-radius:12px}
  /* セグメントトグル（ロム01/02・03/04） */
  .traits-toggle{position:relative;display:grid;grid-template-columns:1fr 1fr;width:max(220px,36%);max-width:420px;background:#111922;border:1px solid #2a3b48;border-radius:999px;padding:4px;margin:.2rem 0 .9rem}
  .traits-toggle .pair-btn{appearance:none;background:transparent;border:0;color:#cfe2ff;border-radius:999px;padding:.5rem 1.1rem;font-size:.9rem;font-weight:800;cursor:pointer;position:relative;z-index:1}
  .traits-toggle .pair-btn[aria-pressed="false"]{color:#a9bfd4}
  .traits-toggle .pair-btn[aria-pressed="true"]{color:#111}
  .traits-toggle .seg-indicator{position:absolute;top:4px;bottom:4px;left:4px;width:calc(50% - 4px);border-radius:999px;background:#ff7f1c;transition:transform .2s ease}
  /* スロットバー */
  .slot-bar{display:flex;flex-wrap:wrap;gap:5px;margin:.3rem 0 1rem}
  .slot-btn{border:1px solid #2a3b48;border-radius:8px;background:#16222b;padding:.16rem;cursor:pointer;box-shadow:0 4px 16px -10px #000}
  .slot-btn img{display:block;height:28px;width:auto;filter:drop-shadow(0 1px 0 #000)}
  .slot-btn[aria-pressed="true"]{background:#203544;border-color:#4a6a7f;box-shadow:0 0 0 3px rgba(99,183,255,.25), 0 8px 24px -12px #000}
  /* グリッド行コンテナ */
  .traits-grid{display:flex;flex-direction:column;gap:.8rem}
  .traits-row{display:grid;gap:.55rem;background:rgba(22,34,43,.35);border:1px solid #273846;border-radius:12px;padding:.6rem}
  .traits-row.top,.traits-row.bottom{grid-template-columns:repeat(4, minmax(44px, 1fr))}
  .traits-row.mid{grid-template-columns:repeat(4, minmax(44px, 1fr))}
  .traits-row.mid .traits-tile:nth-child(2){grid-column:span 2}
  .traits-tile{background:transparent;border:0;border-radius:8px;display:flex;align-items:center;justify-content:center;padding:0;min-height:auto}
  .traits-tile img{max-width:100%;max-height:64px;object-fit:contain;filter:drop-shadow(0 0 4px #0008)}
  @media(min-width:760px){
  .slot-btn img{height:34px}
  .traits-row.top,.traits-row.bottom{grid-template-columns:repeat(4, 100px)}
  .traits-row.mid{grid-template-columns:repeat(4, 100px)}
  .traits-row.mid .traits-tile:nth-child(2){grid-column:span 2}
    .traits-tile img{max-height:72px}
  }
  </style>
</head>
<body>
  <header class="wiki-header shadow-md sticky top-0 z-50 font-inter">
    <div class="max-w-7xl mx-auto flex items-center px-3 sm:px-4 py-3 gap-4">
      <a href="/" class="text-xl sm:text-2xl font-extrabold tracking-tight hover:opacity-80 transition" style="color:#63b7ff">negi-lab.com</a>
      <button id="menuToggle" class="ml-auto inline-flex items-center justify-center w-9 h-9 rounded-md border border-[#24303b] bg-[#18232d] text-[#cfe2ff] sm:hidden" aria-label="メニュー" aria-expanded="false">≡</button>
      <nav id="mainNav" class="ml-auto hidden sm:block">
        <ul class="flex flex-col sm:flex-row gap-3 sm:gap-6 font-medium text-base items-start sm:items-center py-3 sm:py-0" data-nav-list>
          <li><a href="../index.html" class="nav-link">新月同行Wiki</a></li>
          <li><a href="../chars/character.html" class="nav-link">キャラ一覧</a></li>
          <li><a href="index.html" class="nav-link">ロム図鑑</a></li>
        </ul>
      </nav>
    </div>
  </header>
  <style>
    .wiki-header{background:#0f161c;border-bottom:1px solid #18222c}
    .wiki-header .nav-link{color:#cfe2ff;transition:color .25s}
    .wiki-header .nav-link:hover{color:#63b7ff}
    .wiki-header.open #mainNav{display:block}
    .wiki-header #mainNav{animation:navFade .25s ease}
    @keyframes navFade{from{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}
  </style>

  <main>
    <section class="wiki-hero" data-wiki-header>
      <div class="wiki-hero-bar">
  <h1 class="wiki-hero-title" aria-label="新月同行 Wiki セクションタイトル">新月同行 Wiki</h1>
        <form class="wiki-search" role="search" onsubmit="return window.__wikiSearchSubmit && window.__wikiSearchSubmit(event)">
          <input id="wikiSearchInput" type="search" placeholder="Wiki内検索..." aria-label="Wiki内検索" />
        </form>
      </div>
      <div class="wiki-cat-bar-wrapper">
        <div class="wiki-cat-bar" role="tablist" aria-label="Wiki カテゴリ">
          <button class="wiki-cat-btn" data-panel="panel-dex" aria-expanded="false" role="tab">図鑑</button>
          <button class="wiki-cat-btn" data-panel="panel-tools" aria-expanded="false" role="tab">ツール</button>
          <button class="wiki-cat-btn" data-panel="panel-modes" aria-expanded="false" role="tab">戦略行動</button>
          <button class="wiki-cat-btn" data-panel="panel-guides" aria-expanded="false" role="tab">ガイド</button>
        </div>
        <div class="wiki-acc-panels">
          <div id="panel-dex" class="wiki-acc-panel" role="tabpanel" aria-hidden="true">
            <div class="wiki-acc-grid">
              <a href="../chars/index.html"><span>キャラ図鑑</span><span class="wiki-acc-badge">LIVE</span></a>
              <a href="../chars/character.html"><span>キャラ一覧</span><span class="wiki-acc-badge">LIVE</span></a>
              <a href="index.html"><span>ロム図鑑</span><span class="wiki-acc-badge">LIVE</span></a>
              <a href="#" aria-disabled="true" onclick="return false"><span>スキン図鑑</span><span class="wiki-acc-badge">準備中</span></a>
            </div>
          </div>
          <div id="panel-tools" class="wiki-acc-panel" role="tabpanel" aria-hidden="true">
            <div class="wiki-acc-grid">
              <a href="#" aria-disabled="true" onclick="return false"><span>ダメージ計算ツール</span><span class="wiki-acc-badge">予定</span></a>
              <a href="../index.html#today"><span>誕生日カレンダー</span><span class="wiki-acc-badge">予定</span></a>
              <a href="#" aria-disabled="true" onclick="return false"><span>キャラ所持チェッカー</span><span class="wiki-acc-badge">予定</span></a>
            </div>
          </div>
          <div id="panel-modes" class="wiki-acc-panel" role="tabpanel" aria-hidden="true">
            <div class="wiki-acc-grid">
              <a href="#" aria-disabled="true" onclick="return false"><span>ブルーホーム</span><span class="wiki-acc-badge">準備中</span></a>
              <a href="#" aria-disabled="true" onclick="return false"><span>険境復元</span><span class="wiki-acc-badge">準備中</span></a>
              <a href="#" aria-disabled="true" onclick="return false"><span>特派探索</span><span class="wiki-acc-badge">準備中</span></a>
              <a href="#" aria-disabled="true" onclick="return false"><span>世紀拘束塔</span><span class="wiki-acc-badge">準備中</span></a>
            </div>
          </div>
          <div id="panel-guides" class="wiki-acc-panel" role="tabpanel" aria-hidden="true">
            <div class="wiki-acc-grid">
              <a href="#" aria-disabled="true" onclick="return false"><span>初心者ガイド</span><span class="wiki-acc-badge">準備中</span></a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ミドル広告: ヒーロー直下に配置（タイトルやアコーディオンと重ならないよう独立セクション） -->
    <section class="section" id="ads-middle">
      <aside class="ad-block" aria-label="スポンサーリンク ミドル広告">
        <div class="ad-label">スポンサーリンク</div>
  <ins class="adsbygoogle" data-ad-client="ca-pub-1835873052239386" data-ad-slot="4837564489" data-ad-format="auto" data-full-width-responsive="true" data-ad-lazy="1" aria-label="広告"></ins>
      </aside>
    </section>

    <section class="section" id="roms-gallery">
      <h2>ロム図鑑</h2>
      <div class="grid-roms" id="romsGrid"></div>
    </section>

    <section class="section" id="roms-sets">
      <h2>セット効果</h2>
      <div class="card">
  <div class="small" style="margin-bottom:.5rem">ヘッダーのボタンをタップすると「昇順 → 降順 → デフォルト」で切り替わります。</div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>名前 <button class="sort-toggle" data-key="名前" data-order="default" aria-label="並び替え">⇅</button></th>
                <th>2セット効果 <button class="sort-toggle" data-key="2セット効果" data-order="default" aria-label="並び替え">⇅</button></th>
                <th>4セット効果 <button class="sort-toggle" data-key="4セット効果" data-order="default" aria-label="並び替え">⇅</button></th>
              </tr>
            </thead>
            <tbody id="romsSetsBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="section" id="roms-stats">
      <h2>ロムステータス（最大値）</h2>
      <div class="card">
  <div class="small" style="margin-bottom:.5rem">ヘッダーのボタンをタップすると「昇順 → 降順 → デフォルト」で切り替わります。</div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>名前 <button class="sort-toggle" data-key="名前" data-order="default" aria-label="並び替え">⇅</button></th>
                <th>攻撃 <button class="sort-toggle" data-key="攻撃" data-order="default" aria-label="並び替え">⇅</button></th>
                <th>HP <button class="sort-toggle" data-key="HP" data-order="default" aria-label="並び替え">⇅</button></th>
                <th>物理防御1 <button class="sort-toggle" data-key="物理防御1" data-order="default" aria-label="並び替え">⇅</button></th>
                <th>物理防御2 <button class="sort-toggle" data-key="物理防御2" data-order="default" aria-label="並び替え">⇅</button></th>
                <th>特殊防御1 <button class="sort-toggle" data-key="特殊防御1" data-order="default" aria-label="並び替え">⇅</button></th>
                <th>特殊防御2 <button class="sort-toggle" data-key="特殊防御2" data-order="default" aria-label="並び替え">⇅</button></th>
              </tr>
            </thead>
            <tbody id="romsStatsBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- 特性能力値 -->
    <section class="section" id="roms-traits">
      <div class="bg" aria-hidden="true"></div>
      <div class="inner">
        <h2>特性能力値</h2>
        <div class="traits-toggle" role="tablist" aria-label="ロム切替">
          <button type="button" class="pair-btn" data-pair="pair12" aria-pressed="true" role="tab">ロム01/02</button>
          <button type="button" class="pair-btn" data-pair="pair34" aria-pressed="false" role="tab">ロム03/04</button>
        </div>
        <div class="slot-bar" role="tablist" aria-label="スロット選択">
          <button type="button" class="slot-btn" data-slot="1" aria-pressed="true"><img alt="Slot 1" src="../assets/roms/rom_slot1.png"></button>
          <button type="button" class="slot-btn" data-slot="2" aria-pressed="false"><img alt="Slot 2" src="../assets/roms/rom_slot2.png"></button>
          <button type="button" class="slot-btn" data-slot="3" aria-pressed="false"><img alt="Slot 3" src="../assets/roms/rom_slot3.png"></button>
          <button type="button" class="slot-btn" data-slot="4" aria-pressed="false"><img alt="Slot 4" src="../assets/roms/rom_slot4.png"></button>
          <button type="button" class="slot-btn" data-slot="5" aria-pressed="false"><img alt="Slot 5" src="../assets/roms/rom_slot5.png"></button>
        </div>
        <div class="traits-grid" id="traitsGrid" aria-live="polite"></div>
      </div>
    </section>

    <!-- ボトム広告: フッター直前に配置 -->
    <section class="section" id="ads-bottom">
      <aside class="ad-block" aria-label="スポンサーリンク フッター広告">
        <div class="ad-label">スポンサーリンク</div>
  <ins class="adsbygoogle" data-ad-client="ca-pub-1835873052239386" data-ad-slot="4837564489" data-ad-format="auto" data-full-width-responsive="true" data-ad-lazy="1" aria-label="広告"></ins>
      </aside>
    </section>

  </main>

  <footer class="bg-gray-800 text-gray-300 py-10 text-center text-sm font-inter mt-10">
    <nav class="mb-3">
      <a href="/privacy-policy-unified.html" class="underline hover:text-accent mx-2">プライバシーポリシー</a>
      <a href="/terms.html" class="underline hover:text-accent mx-2">利用規約</a>
      <a href="/about.html" class="underline hover:text-accent mx-2">運営者情報</a>
      <a href="mailto:negilab.com@gmail.com" class="underline hover:text-accent mx-2">お問い合わせ</a>
      <a href="/sitemap.xml" class="underline hover:text-accent mx-2">サイトマップ</a>
    </nav>
  <div class="text-xs text-gray-400 mb-2">新月同行 Wiki - Data oriented fan project (Unofficial)</div>
    <div id="build-meta" class="text-xs">Build: 2025-09-10T01:22:44</div>
    <div class="mt-2">&copy; 2025 negi-lab.com</div>
  </footer>

  <script>
    // 埋め込みデータ
    window.__ROMS_GRID__ = JSON.parse('[{"ID": "001", "ID_num": 1, "名前": "シャドウC", "画像": "../assets/roms/シャドウC.png"}, {"ID": "002", "ID_num": 2, "名前": "スレイT", "画像": "../assets/roms/スレイT.png"}, {"ID": "003", "ID_num": 3, "名前": "リングR", "画像": "../assets/roms/リングR.png"}, {"ID": "004", "ID_num": 4, "名前": "エレクトM", "画像": "../assets/roms/エレクトM.png"}, {"ID": "005", "ID_num": 5, "名前": "エビルA", "画像": "../assets/roms/エビルA.png"}, {"ID": "006", "ID_num": 6, "名前": "フラッフィS", "画像": "../assets/roms/フラッフィS.png"}, {"ID": "007", "ID_num": 7, "名前": "リッパーD", "画像": "../assets/roms/リッパーD.png"}, {"ID": "008", "ID_num": 8, "名前": "ピンクK", "画像": "../assets/roms/ピンクK.png"}, {"ID": "009", "ID_num": 9, "名前": "ブラッドV", "画像": "../assets/roms/ブラッドV.png"}, {"ID": "010", "ID_num": 10, "名前": "ホラーY", "画像": "../assets/roms/ホラーY.png"}, {"ID": "011", "ID_num": 11, "名前": "アンダーB", "画像": "../assets/roms/アンダーB.png"}, {"ID": "012", "ID_num": 12, "名前": "メカコアZ", "画像": "../assets/roms/メカコアZ.png"}, {"ID": "013", "ID_num": 13, "名前": "ソーラーP", "画像": "../assets/roms/ソーラーP.png"}, {"ID": "014", "ID_num": 14, "名前": "クロニクルH", "画像": "../assets/roms/クロニクルH.png"}, {"ID": "015", "ID_num": 15, "名前": "ギャラクシーW", "画像": "../assets/roms/ギャラクシーW.png"}, {"ID": "016", "ID_num": 16, "名前": "フォートレスN", "画像": "../assets/roms/フォートレスN.png"}, {"ID": "017", "ID_num": 17, "名前": "カウンターF", "画像": "../assets/roms/カウンターF.png"}, {"ID": "018", "ID_num": 18, "名前": "キッチンO", "画像": "../assets/roms/キッチンO.png"}, {"ID": "019", "ID_num": 19, "名前": "クリームU", "画像": "../assets/roms/クリームU.png"}, {"ID": "020", "ID_num": 20, "名前": "クリスタルG", "画像": "../assets/roms/クリスタルG.png"}]');
    window.__ROMS_SETS__ = JSON.parse('[{"ID": "001", "ID_num": 1, "名前": "シャドウC", "2セット効果": "攻撃が20%上昇する。", "4セット効果": "超限スキルを発動した時、与えるダメージが15%上昇する。"}, {"ID": "002", "ID_num": 2, "名前": "スレイT", "2セット効果": "HPが20%上昇する", "4セット効果": "受けるダメージが8%低下し、被相性ダメージ時、受けるダメージが追加で8%低下する。"}, {"ID": "003", "ID_num": 3, "名前": "リングR", "2セット効果": "初期TPLvが10上昇する。", "4セット効果": "自身のHPが70%を超える時、与ダメージが15%上昇する。戦闘開始から3ターン、この上昇は倍になる。"}, {"ID": "004", "ID_num": 4, "名前": "エレクトM", "2セット効果": "攻撃が20%上昇する。", "4セット効果": "通常攻撃時、与えるダメージが20%上昇し、与ダメージの20%に基づき自身を定量治療する。"}, {"ID": "005", "ID_num": 5, "名前": "エビルA", "2セット効果": "攻撃が20%上昇する。", "4セット効果": "個人ターン外でダメージを与えた時、与えるダメージが30%上昇する。"}, {"ID": "006", "ID_num": 6, "名前": "フラッフィS", "2セット効果": "治療率が10%上昇する。", "4セット効果": "治療を行う時、治療対象のHPが50%未満の場合、自身の治療率が20%を上昇する。HPが30%未満の場合、治療率がさらに20%上昇する。"}, {"ID": "007", "ID_num": 7, "名前": "リッパーD", "2セット効果": "回復率が10%上昇する。", "4セット効果": "毎回自身が被ダメージ時、次に被治療の回復率が20%上昇する。この効果は最大5回までスタックする。"}, {"ID": "008", "ID_num": 8, "名前": "ピンクK", "2セット効果": "効果命中が10%上昇する。", "4セット効果": "自身が敵にデバフ効果を付与後、自身はTPLvを4獲得する。各スキルで最大4回まで発動する。"}, {"ID": "009", "ID_num": 9, "名前": "ブラッドV", "2セット効果": "会心率が16%上昇する。", "4セット効果": "会心時、与ダメージの30%に基づき自身を定量治療する。"}, {"ID": "010", "ID_num": 10, "名前": "ホラーY", "2セット効果": "効果命中が10%上昇する。", "4セット効果": "ターゲットにデバフを付与した時、自身の攻撃が20%上昇する、1ターン持続。"}, {"ID": "011", "ID_num": 11, "名前": "アンダーB", "2セット効果": "会心率が16%上昇する。", "4セット効果": "戦術スキルを使用してダメージを与えた時、自身の会心率が10%上昇する。効果は3ターン持続する。スキル毎に1回のみ発動する。戦術スキル発動後、自身の会心ダメージが30%上昇する。効果は3ターン持続する。このロムによる会心率上昇と会心ダメージ上昇の獲得は、同時に最大1層までしか存在できない。"}, {"ID": "012", "ID_num": 12, "名前": "メカコアZ", "2セット効果": "HPが20%上昇する。", "4セット効果": "各行動順で初めて被ダメージ時、受けるダメージが15%低下し、初めてデバフ効果を受ける時、自身の効果抵抗が30%上昇する。"}, {"ID": "013", "ID_num": 13, "名前": "ソーラーP", "2セット効果": "HPが20%上昇する。", "4セット効果": "援護に成功時、自身の最大HPの2.5%に基づき自身を定量治療する。"}, {"ID": "014", "ID_num": 14, "名前": "クロニクルH", "2セット効果": "治療率が10%上昇する。", "4セット効果": "味方を治療時、50%の確率で目標のデバフ効果を1つ除去する。"}, {"ID": "015", "ID_num": 15, "名前": "ギャラクシーW", "2セット効果": "攻撃が20%上昇する。", "4セット効果": "自身のHPが75%/50%/30%未満の時、与えるダメージが15%/20%/30%上昇する。"}, {"ID": "016", "ID_num": 16, "名前": "フォートレスN", "2セット効果": "HPが20%上昇する。", "4セット効果": "自身に防護を付与する時、その防護量が20%上昇する。"}, {"ID": "017", "ID_num": 17, "名前": "カウンターF", "2セット効果": "会心率が16%上昇する。", "4セット効果": "通常攻撃、戦術スキル、超限スキルを使用するたび、自身の会心率が5%、会心ダメージが5%上昇する。この効果は2ターン持続し、各行動シーケンスで最大3回まで発動できる。"}, {"ID": "018", "ID_num": 18, "名前": "キッチンO", "2セット効果": "初期TPLvが10上昇する。", "4セット効果": "超限スキルで味方にTPLvを付与した時、追加で自身のTPLvを10回復し、さらに自身の最大HPの5%の定量治療を行う。この効果の発動には3ターンのクールタイムがある。"}, {"ID": "019", "ID_num": 19, "名前": "クリームU", "2セット効果": "攻撃が20%上昇する。", "4セット効果": "自身が持続ダメージを付与する時、自身の効果命中が30%上昇し、与える持続ダメージ及び即時発動する持続ダメージが20%上昇する。"}, {"ID": "020", "ID_num": 20, "名前": "クリスタルG", "2セット効果": "HPが20%上昇する。", "4セット効果": "自身が受ける追加ダメージを15%軽減する。さらに、追加ダメージを受けた時、自身の最大HPの2.5%分の定量治療する。この治療効果は1ターンにつき1回まで発動可能。"}]');
    window.__ROMS_STATS__ = JSON.parse('[{"ID": "001", "ID_num": 1, "名前": "シャドウC", "攻撃": 234, "HP": 1526, "物理防御1": 509, "物理防御2": 509, "特殊防御1": 509, "特殊防御2": 509}, {"ID": "002", "ID_num": 2, "名前": "スレイT", "攻撃": 156, "HP": 1526, "物理防御1": 1018, "物理防御2": 509, "特殊防御1": 1018, "特殊防御2": 509}, {"ID": "003", "ID_num": 3, "名前": "リングR", "攻撃": 234, "HP": 1272, "物理防御1": 509, "物理防御2": 763, "特殊防御1": 509, "特殊防御2": 763}, {"ID": "004", "ID_num": 4, "名前": "エレクトM", "攻撃": 234, "HP": 1272, "物理防御1": 509, "物理防御2": 763, "特殊防御1": 509, "特殊防御2": 763}, {"ID": "005", "ID_num": 5, "名前": "エビルA", "攻撃": 234, "HP": 1272, "物理防御1": 509, "物理防御2": 763, "特殊防御1": 509, "特殊防御2": 763}, {"ID": "006", "ID_num": 6, "名前": "フラッフィS", "攻撃": 195, "HP": 1272, "物理防御1": 763, "物理防御2": 763, "特殊防御1": 763, "特殊防御2": 763}, {"ID": "007", "ID_num": 7, "名前": "リッパーD", "攻撃": 156, "HP": 1018, "物理防御1": 1018, "物理防御2": 1018, "特殊防御1": 1018, "特殊防御2": 1018}, {"ID": "008", "ID_num": 8, "名前": "ピンクK", "攻撃": 195, "HP": 1272, "物理防御1": 763, "物理防御2": 763, "特殊防御1": 763, "特殊防御2": 763}, {"ID": "009", "ID_num": 9, "名前": "ブラッドV", "攻撃": 234, "HP": 1272, "物理防御1": 509, "物理防御2": 763, "特殊防御1": 509, "特殊防御2": 763}, {"ID": "010", "ID_num": 10, "名前": "ホラーY", "攻撃": 234, "HP": 1272, "物理防御1": 509, "物理防御2": 763, "特殊防御1": 509, "特殊防御2": 763}, {"ID": "011", "ID_num": 11, "名前": "アンダーB", "攻撃": 234, "HP": 1272, "物理防御1": 509, "物理防御2": 763, "特殊防御1": 509, "特殊防御2": 763}, {"ID": "012", "ID_num": 12, "名前": "メカコアZ", "攻撃": 156, "HP": 1018, "物理防御1": 1018, "物理防御2": 1018, "特殊防御1": 1018, "特殊防御2": 1018}, {"ID": "013", "ID_num": 13, "名前": "ソーラーP", "攻撃": 156, "HP": 1526, "物理防御1": 1018, "物理防御2": 509, "特殊防御1": 1018, "特殊防御2": 509}, {"ID": "014", "ID_num": 14, "名前": "クロニクルH", "攻撃": 195, "HP": 1272, "物理防御1": 763, "物理防御2": 763, "特殊防御1": 763, "特殊防御2": 763}, {"ID": "015", "ID_num": 15, "名前": "ギャラクシーW", "攻撃": 234, "HP": 1272, "物理防御1": 509, "物理防御2": 763, "特殊防御1": 509, "特殊防御2": 763}, {"ID": "016", "ID_num": 16, "名前": "フォートレスN", "攻撃": 156, "HP": 1526, "物理防御1": 1018, "物理防御2": 509, "特殊防御1": 1018, "特殊防御2": 509}, {"ID": "017", "ID_num": 17, "名前": "カウンターF", "攻撃": 234, "HP": 1272, "物理防御1": 509, "物理防御2": 763, "特殊防御1": 509, "特殊防御2": 763}, {"ID": "018", "ID_num": 18, "名前": "キッチンO", "攻撃": 195, "HP": 1272, "物理防御1": 763, "物理防御2": 763, "特殊防御1": 763, "特殊防御2": 763}, {"ID": "019", "ID_num": 19, "名前": "クリームU", "攻撃": 234, "HP": 1272, "物理防御1": 509, "物理防御2": 763, "特殊防御1": 509, "特殊防御2": 763}, {"ID": "020", "ID_num": 20, "名前": "クリスタルG", "攻撃": 156, "HP": 1526, "物理防御1": 1018, "物理防御2": 509, "特殊防御1": 1018, "特殊防御2": 509}]');

    // 検索遷移
    window.__wikiSearchSubmit = function(ev){
      ev.preventDefault();
      var q = document.getElementById('wikiSearchInput').value.trim();
      if(!q) return false;
      location.href = '../search.html?q=' + encodeURIComponent(q);
      return false;
    };

    // モバイルナビ
    (function(){
      var header=document.querySelector('.wiki-header');
      var btn=document.getElementById('menuToggle');
      var nav=document.getElementById('mainNav');
      if(!btn||!nav) return;
      btn.addEventListener('click',function(){
        var open=header.classList.toggle('open');
        btn.setAttribute('aria-expanded',open?'true':'false');
        if(open){ nav.classList.remove('hidden'); } else if(window.innerWidth < 640){ nav.classList.add('hidden'); }
      });
      window.addEventListener('resize',function(){
        if(window.innerWidth >= 640){ nav.classList.remove('hidden'); header.classList.remove('open'); btn.setAttribute('aria-expanded','false'); }
        else if(!header.classList.contains('open')){ nav.classList.add('hidden'); }
      });
    })();

    // アコーディオン（他ページと同様: デフォルト全閉・キーボード操作・ハッシュ同期）
    (function(){
      var buttons=[].slice.call(document.querySelectorAll('.wiki-cat-btn'));
      var panels={};
      buttons.forEach(function(b){ var id=b.getAttribute('data-panel'); if(id){ panels[id]=document.getElementById(id); }});
      function toggle(btn){
        var id=btn.getAttribute('data-panel'); var panel=panels[id]; if(!panel) return;
        var open = btn.getAttribute('aria-expanded')==='true';
        // 全て閉じる
        buttons.forEach(function(x){x.setAttribute('aria-expanded','false')});
        Object.values(panels).forEach(function(p){p.classList.remove('open');p.setAttribute('aria-hidden','true');});
        // 開く
        if(!open){
          btn.setAttribute('aria-expanded','true');
          panel.classList.add('open');
          panel.setAttribute('aria-hidden','false');
        }
      }
      // クリックでトグル + ハッシュ更新/削除
      buttons.forEach(function(btn){
        btn.addEventListener('click',function(){
          var willOpen = btn.getAttribute('aria-expanded') !== 'true';
          toggle(btn);
          if(willOpen){
            try{ history.replaceState(null,'','#'+btn.getAttribute('data-panel')); }catch(_){}
          }else{
            if(location.hash){ try{ history.replaceState(null,'',location.pathname+location.search); }catch(_){} }
          }
        });
      });
      // キーボード操作（左右/Home/End）
      document.addEventListener('keydown',function(e){
        if(['ArrowLeft','ArrowRight','Home','End'].indexOf(e.key)===-1) return;
        var idx = buttons.indexOf(document.activeElement);
        if(idx < 0) return; e.preventDefault();
        var ni = idx;
        if(e.key==='ArrowRight') ni=(idx+1)%buttons.length;
        else if(e.key==='ArrowLeft') ni=(idx-1+buttons.length)%buttons.length;
        else if(e.key==='Home') ni=0; else if(e.key==='End') ni=buttons.length-1;
        buttons[ni].focus();
      });
      // ハッシュによる初期オープンと変更監視
      function openFromHash(){
        var h=(location.hash||'').replace('#','');
        if(h && /^panel-/.test(h)){
          var target=document.querySelector('.wiki-cat-btn[data-panel="'+h+'"]');
          if(target) toggle(target);
          return true;
        }
        return false;
      }
      if(!openFromHash()){
        // デフォルトは全閉（何もしない）
      }
      window.addEventListener('hashchange',openFromHash);
    })();

    // レンダリング
    (function(){
      // 図鑑: ID降順
      var list = (window.__ROMS_GRID__||[]).slice().sort(function(a,b){ return b.ID_num - a.ID_num; });
      var grid = document.getElementById('romsGrid');
      list.forEach(function(it){
        var card=document.createElement('a'); card.className='rom-card'; card.href = './' + it.ID + '.html'; card.setAttribute('aria-label', it.ID + ' ' + it.名前 + ' の詳細へ');
        var img=document.createElement('img'); img.alt=it.名前; img.src=it.画像 || '../assets/roms/rom_nan.png';
        var name=document.createElement('div'); name.className='name'; name.textContent = it.ID + ' ' + it.名前;
        card.appendChild(img); card.appendChild(name); grid.appendChild(card);
      });

      // テーブル描画共通
      function renderTbody(tbody, rows, cols){
        tbody.innerHTML='';
        rows.forEach(function(r){
          var tr=document.createElement('tr');
          cols.forEach(function(k){
            var td=document.createElement('td'); td.textContent = (r[k] != null ? r[k] : ''); tr.appendChild(td);
          });
          tbody.appendChild(tr);
        });
      }

      // セット効果: 既定はID昇順
      var setsDefault = (window.__ROMS_SETS__||[]).slice().sort(function(a,b){ return a.ID_num - b.ID_num; });
      var setsWork = setsDefault.slice();
      var setsBody = document.getElementById('romsSetsBody');
      var setsCols = ['名前','2セット効果','4セット効果'];
      renderTbody(setsBody, setsWork, setsCols);
      document.querySelectorAll('#roms-sets .sort-toggle').forEach(function(btn){
        btn.addEventListener('click', function(){
          var key = btn.getAttribute('data-key');
          var order = btn.getAttribute('data-order') || 'default';
          // 次の順序: default -> asc -> desc -> default
          var next = (order==='default') ? 'asc' : (order==='asc' ? 'desc' : 'default');
          btn.setAttribute('data-order', next);
          setsWork = setsDefault.slice();
          if(next==='asc') setsWork.sort(function(a,b){ return String(a[key]).localeCompare(String(b[key]), 'ja'); });
          else if(next==='desc') setsWork.sort(function(a,b){ return String(b[key]).localeCompare(String(a[key]), 'ja'); });
          // default は setsDefault のまま
          renderTbody(setsBody, setsWork, setsCols);
        });
      });

      // ステータス: 既定はID昇順
      var statsDefault = (window.__ROMS_STATS__||[]).slice().sort(function(a,b){ return a.ID_num - b.ID_num; });
      var statsWork = statsDefault.slice();
      var statsBody = document.getElementById('romsStatsBody');
      var statsCols = ['名前','攻撃','HP','物理防御1','物理防御2','特殊防御1','特殊防御2'];
      renderTbody(statsBody, statsWork, statsCols);
      document.querySelectorAll('#roms-stats .sort-toggle').forEach(function(btn){
        btn.addEventListener('click', function(){
          var key = btn.getAttribute('data-key');
          var order = btn.getAttribute('data-order') || 'default';
          var next = (order==='default') ? 'asc' : (order==='asc' ? 'desc' : 'default');
          btn.setAttribute('data-order', next);
          statsWork = statsDefault.slice();
          if(next==='asc') statsWork.sort(function(a,b){ return (Number(a[key])||0) - (Number(b[key])||0); });
          else if(next==='desc') statsWork.sort(function(a,b){ return (Number(b[key])||0) - (Number(a[key])||0); });
          renderTbody(statsBody, statsWork, statsCols);
        });
      });
    })();
  </script>
  <script src="https://negi-lab.com/js/ads-consent-loader.js" defer></script>
  <script>
    // 特性能力値: データと描画
    (function(){
      function asset(name){ return '../assets/roms/' + encodeURIComponent(name); }
      var CENTER = 'rom_disply2.png';
      var NAN = 'rom_nan.png';
      var DATA = {
        pair12: {
          1: {
            top:   [NAN,'HP.png','攻撃.png',NAN],
            mid:   [NAN,CENTER,NAN],
            bot:   [NAN,'攻撃%.png','HP%.png',NAN]
          },
          2: {
            top:   [NAN,'HP%.png','物理防御.png',NAN],
            mid:   ['行動速度.png',CENTER,'特殊防御.png'],
            bot:   [NAN,'回復率.png','効果抵抗.png',NAN]
          },
          3: {
            top:   [NAN,'攻撃%.png','会心率.png',NAN],
            mid:   ['初期TPLv.png',CENTER,'会心ダメ.png'],
            bot:   [NAN,'治療率.png','効果命中.png',NAN]
          },
          4: {
            top:   ['HP%.png','会心率.png','会心ダメ.png',NAN],
            mid:   ['行動速度.png',CENTER,'効果命中.png'],
            bot:   [NAN,'回復率.png','治療率.png','効果抵抗.png']
          },
          5: {
            top:   ['物理防御.png','特殊防御.png','会心率.png','効果命中.png'],
            mid:   ['固有特性1.png',CENTER,'効果抵抗.png'],
            bot:   ['固有特性2.png','初期TPLv.png','回復率.png','治療率.png']
          }
        },
        pair34: {
          1: {
            top:   [NAN,'HP.png','攻撃.png',NAN],
            mid:   [NAN,CENTER,NAN],
            bot:   [NAN,'攻撃%.png','HP%.png',NAN]
          },
          2: {
            top:   [NAN,'攻撃%.png','会心率.png',NAN],
            mid:   ['初期TPLv.png',CENTER,'会心ダメ.png'],
            bot:   [NAN,'治療率.png','効果命中.png',NAN]
          },
          3: {
            top:   [NAN,'HP%.png','物理防御.png',NAN],
            mid:   ['行動速度.png',CENTER,'特殊防御.png'],
            bot:   [NAN,'回復率.png','効果抵抗.png',NAN]
          },
          4: {
            top:   ['HP%.png','会心率.png','会心ダメ.png',NAN],
            mid:   ['行動速度.png',CENTER,'効果命中.png'],
            bot:   [NAN,'回復率.png','治療率.png','効果抵抗.png']
          },
          5: {
            top:   ['物理防御.png','特殊防御.png','会心率.png','効果命中.png'],
            mid:   ['固有特性1.png',CENTER,'効果抵抗.png'],
            bot:   ['固有特性2.png','初期TPLv.png','回復率.png','治療率.png']
          }
        }
      };

      var state = { pair: 'pair12', slot: 1 };
      var grid = document.getElementById('traitsGrid');
      function tile(src){
        var d=document.createElement('div'); d.className='traits-tile';
        var img=document.createElement('img'); img.alt=src.replace('.png',''); img.src=asset(src);
        d.appendChild(img);
        return d;
      }
      function render(){
        grid.innerHTML='';
        var slotData = (DATA[state.pair]||{})[state.slot];
        if(!slotData) return;
        var top=document.createElement('div'); top.className='traits-row top';
        slotData.top.forEach(function(name){ top.appendChild(tile(name)); });
  var mid=document.createElement('div'); mid.className='traits-row mid';
  slotData.mid.forEach(function(name){ mid.appendChild(tile(name)); });
        var bot=document.createElement('div'); bot.className='traits-row bottom';
        slotData.bot.forEach(function(name){ bot.appendChild(tile(name)); });
        grid.appendChild(top); grid.appendChild(mid); grid.appendChild(bot);
      }
      function setPair(pair){
        state.pair = pair; document.querySelectorAll('.pair-btn').forEach(function(b){ b.setAttribute('aria-pressed', b.getAttribute('data-pair')===pair?'true':'false'); });
        // セグメントインジケータ移動
        var seg = document.querySelector('.traits-toggle .seg-indicator');
        if(seg){ seg.style.transform = (pair==='pair12') ? 'translateX(0)' : 'translateX(100%)'; }
        render();
      }
      function setSlot(slot){
        state.slot = slot; document.querySelectorAll('.slot-btn').forEach(function(b){ var on = (Number(b.getAttribute('data-slot'))===slot); b.setAttribute('aria-pressed', on?'true':'false'); var n=b.getAttribute('data-slot'); var img=b.querySelector('img'); img.src = on? ('../assets/roms/rom_slot_hover'+n+'.png') : ('../assets/roms/rom_slot'+n+'.png'); });
        render();
      }
      document.querySelectorAll('.pair-btn').forEach(function(btn){ btn.addEventListener('click', function(){ setPair(btn.getAttribute('data-pair')); }); });
      document.querySelectorAll('.slot-btn').forEach(function(btn){ btn.addEventListener('click', function(){ setSlot(Number(btn.getAttribute('data-slot'))); }); });
      // 初期化: セグメント要素のインジケータ生成
      (function(){
        var wrap=document.querySelector('.traits-toggle');
        if(wrap && !wrap.querySelector('.seg-indicator')){
          var seg=document.createElement('div'); seg.className='seg-indicator'; wrap.appendChild(seg);
        }
      })();
      // 既定: ロム01/02 + スロット1
      setPair('pair12'); setSlot(1);
    })();
  </script>
  <script>
    // 広告未表示時のスポンサー枠縮小: ins.adsbygoogle 内の iframe 出現を監視
    (function(){
      function watchAdBlock(block){
        if(!block) return;
        block.setAttribute('data-ad-empty','true');
        var section = block.closest('.section'); if(section){ section.setAttribute('data-ad-empty','true'); }
        var ins = block.querySelector('ins.adsbygoogle');
        if(!ins) return;
        var filled = false;
        var obs = new MutationObserver(function(){
          if(filled) return;
          if(ins.querySelector('iframe')){
            filled = true;
            block.setAttribute('data-ad-empty','false');
            if(section){ section.setAttribute('data-ad-empty','false'); }
            obs.disconnect();
          }
        });
        obs.observe(ins, {childList:true, subtree:true});
  // 遅延表示（ビューポート進入後ロード等）にも対応するため、filled になるまで監視を継続
      }
      document.querySelectorAll('.ad-block').forEach(watchAdBlock);
    })();
  </script>
</body>
</html>
