// Translations for Music Generator Tool
const musicGeneratorTranslations = {
  en: {
    pageTitle: "【Free】AI Music Generator - Compose & Create BGM | negi-lab.com",
    metaDescription: "AI automatically generates music just by specifying keywords and genres. Create high-quality songs based on music theory for free. Ideal for video BGM and content creation.",
    header: {
      nav: {
        tools: "Tools",
        wikis: "Game Wikis",
      },
    },
    option: {
      ja: "日本語",
      en: "English",
    },
    breadcrumbs: {
      currentPage: "Music Generator",
    },
    main: {
      title: "Music Generator Tool",
      subtitle: "Generates high-quality original music from keywords and emotions based on music theory.",
    },
    mode: {
        simple: "Simple",
        advanced: "Advanced"
    },
    simple: {
        genre: "Genre",
        mood: "Mood",
        keywords: "Keywords (Natural Language)"
    },
    advanced: {
        key: "Key",
        tempo: "Tempo (BPM)",
        instruments: "Instruments",
        structure: "Song Structure"
    },
    button: {
        generate: "Generate Music",
        downloadWav: "WAV",
        downloadMidi: "MIDI"
    },
    status: {
        generating: "AI is composing..."
    },
    player: {
        title: "Player",
        placeholder: "Generated music will appear here"
    },
    history: {
        title: "Generation History",
        placeholder: "No history yet"
    },
    howTo: {
        title: "How It Works & Music Theory",
        item1: { title: "1. Genre & Mood Rulebook", desc: "Defines rules for optimal tempo, scale, chord progressions, and rhythm patterns for each genre and mood." },
        item2: { title: "2. Diatonic Chord Theory", desc: "Automatically assembles musically natural and pleasant-sounding chord progressions based on the selected key's scale." },
        item3: { title: "3. Musical Melody Generation", desc: "Creates harmonious melodies by prioritizing chord tones and weaving in notes from the scale." },
        item4: { title: "4. Song Structure & Dynamics", desc: "Generates typical song structures like verse-chorus-bridge and varies instrumentation and volume for an engaging listening experience." },
        item5: { title: "5. Keyword Analysis System", desc: "Analyzes natural language input and translates it into musical parameters, like increasing tempo for 'uplifting' or using synths for 'space'." },
        item6: { title: "6. Realistic Instrument Sounds", desc: "Uses the Tone.js-Instruments library to perform with realistic sounds sampled from actual instruments." }
    },
    useCase: {
        title: "Use Cases for the Music Generator",
        item1: { title: "BGM for Video Content", desc: "Use as copyright-free original BGM for YouTube videos, vlogs, and corporate promotional videos." },
        item2: { title: "Game & App Development", desc: "Utilize as background music for indie games and personal app projects to reduce development costs." },
        item3: { title: "Presentations", desc: "Enhance audience engagement by playing music that matches the atmosphere and theme of your presentation." },
        item4: { title: "Podcasts & Streaming", desc: "Easily create music for openings, endings, and jingles that fit your show's brand image." },
        item5: { title: "Songwriting & Arrangement Ideas", desc: "Get inspiration for new songs from melodies and chord progressions generated by the AI." },
        item6: { title: "Relaxation & Work BGM", desc: "Generate music of your preferred mood and length to use as personal BGM for concentration or relaxation." }
    },
    siteInfo: {
        title: "About negi-lab.com's Uniqueness, Policies, and Disclaimers",
        point1: "This site and its tools are independently developed and operated by negi-lab.com.",
        point2: "While we include ads and affiliate links, our top priority is the user experience.",
        point3: "We strive for accuracy and safety, but please use the site at your own risk.",
        copyright: "© 2025 negi-lab.com"
    },
    footer: {
        privacyPolicy: "Privacy Policy",
        terms: "Terms of Service",
        about: "About Us",
        contact: "Contact",
        sitemap: "Sitemap",
        copyright: "© 2025 negi-lab.com"
    }
  },
  ja: {
    pageTitle: "【無料】AI音楽生成ツール - 作曲・BGM作成 | negi-lab.com",
    metaDescription: "キーワードやジャンルを指定するだけで、AIが音楽を自動生成。音楽理論に基づいた高品質な楽曲を無料で作成できます。動画のBGMやコンテンツ制作に最適です。",
    header: {
      nav: {
        tools: "ツール",
        wikis: "ゲームWiki",
      },
    },
    option: {
      ja: "日本語",
      en: "English",
    },
    breadcrumbs: {
      currentPage: "音楽生成ツール",
    },
    main: {
      title: "音楽生成ツール",
      subtitle: "音楽理論に基づき、キーワードや感情から高品質なオリジナル楽曲を生成します。",
    },
    mode: {
        simple: "シンプル",
        advanced: "詳細設定"
    },
    simple: {
        genre: "ジャンル",
        mood: "ムード",
        keywords: "キーワード（自然言語）"
    },
    advanced: {
        key: "キー",
        tempo: "テンポ (BPM)",
        instruments: "楽器",
        structure: "曲の構造"
    },
    button: {
        generate: "音楽を生成",
        downloadWav: "WAV",
        downloadMidi: "MIDI"
    },
    status: {
        generating: "AIが作曲中です..."
    },
    player: {
        title: "プレーヤー",
        placeholder: "ここに生成された音楽が表示されます"
    },
    history: {
        title: "生成履歴",
        placeholder: "まだ履歴がありません"
    },
    howTo: {
        title: "音楽生成の仕組みと理論",
        item1: { title: "1. ジャンルとムードのルールブック", desc: "各ジャンル・ムードに最適なテンポ、スケール、コード進行、リズムパターンのルールを定義しています。" },
        item2: { title: "2. ダイアトニックコード理論", desc: "選択されたキーのスケールに基づき、音楽的に自然で心地よい響きのコード進行を自動で組み立てます。" },
        item3: { title: "3. 音楽的なメロディ生成", desc: "コードの構成音（コードトーン）を優先的に使用し、スケール内の音を織り交ぜることで、調和の取れたメロディを創り出します。" },
        item4: { title: "4. 曲の展開とダイナミクス", desc: "Aメロ→Bメロ→サビといった典型的な曲の構造を生成し、セクションごとに楽器の編成や音量を変化させ、聴き応えのある展開を作ります。" },
        item5: { title: "5. キーワード解析システム", desc: "入力された自然言語を解析し、「疾走感」ならテンポを上げる、「宇宙」ならシンセサイザーを使うなど、音楽のパラメータに変換します。" },
        item6: { title: "6. リアルな楽器音源", desc: "Tone.js-Instrumentsライブラリを使用し、実際の楽器からサンプリングされたリアルな音源で演奏します。" }
    },
    useCase: {
        title: "音楽生成ツールの活用例",
        item1: { title: "動画コンテンツのBGM", desc: "YouTube動画、Vlog、企業プロモーションビデオなど、著作権フリーのオリジナルBGMとして利用できます。" },
        item2: { title: "ゲーム・アプリ開発", desc: "インディーゲームや個人開発アプリの背景音楽、効果音のベースとして活用し、開発コストを削減します。" },
        item3: { title: "プレゼンテーション", desc: "発表の雰囲気やテーマに合わせた音楽を流すことで、聴衆のエンゲージメントを高めます。" },
        item4: { title: "ポッドキャスト・配信", desc: "オープニング、エンディング、ジングルなど、番組のブランドイメージに合った音楽を簡単に作成できます。" },
        item5: { title: "作曲・編曲のアイデア出し", desc: "AIが生成したメロディやコード進行をヒントに、新しい楽曲のインスピレーションを得ることができます。" },
        item6: { title: "リラクゼーション・作業用BGM", desc: "好みの雰囲気や長さの音楽を生成し、集中したい時やリラックスしたい時のパーソナルなBGMとして活用します。" }
    },
    siteInfo: {
        title: "negi-lab.comの独自性・運営方針・免責事項",
        point1: "本サイト・各ツールはnegi-lab.comが独自開発・運営しています。",
        point2: "広告・アフィリエイトを含みますが、ユーザー体験を最優先しています。",
        point3: "正確性・安全性には万全を期していますが、利用は自己責任でお願いします。",
        copyright: "© 2025 negi-lab.com"
    },
    footer: {
        privacyPolicy: "プライバシーポリシー",
        terms: "利用規約",
        about: "運営者情報",
        contact: "お問い合わせ",
        sitemap: "サイトマップ",
        copyright: "© 2025 negi-lab.com"
    }
  }
};

let currentLanguage = localStorage.getItem('language') || 'ja';

function translatePage() {
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (musicGeneratorTranslations[currentLanguage] && musicGeneratorTranslations[currentLanguage][key]) {
            // For meta tags, update the content attribute
            if (element.tagName.toLowerCase() === 'meta') {
                element.setAttribute('content', musicGeneratorTranslations[currentLanguage][key]);
            } else {
                element.innerHTML = musicGeneratorTranslations[currentLanguage][key];
            }
        }
    });
}

function setLanguage(lang) {
    document.documentElement.lang = lang;
    const elements = document.querySelectorAll('[data-translate-key]');
    elements.forEach(el => {
        const key = el.dataset.translateKey;
        const translation = key.split('.').reduce((obj, i) => obj && obj[i], musicGeneratorTranslations[lang]);
        if (translation) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                el.placeholder = translation;
            } else {
                el.textContent = translation;
            }
        }
    });
}

document.addEventListener('DOMContentLoaded', () => {
    const langSwitch = document.getElementById('lang-switch');
    const savedLang = localStorage.getItem('preferredLanguage') || 'ja';
    langSwitch.value = savedLang;
    setLanguage(savedLang);
    translatePage();

    langSwitch.addEventListener('change', (e) => {
        const newLang = e.target.value;
        localStorage.setItem('preferredLanguage', newLang);
        setLanguage(newLang);
        translatePage();
    });
});
